<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Revision: Word Problems</title>
    <style>
        :root {
            /* Color Palette - Friendly, Educational, Clean */
            --primary: #4F46E5; /* Indigo */
            --primary-light: #EEF2FF;
            --accent: #F59E0B; /* Amber */
            --success: #10B981; /* Emerald */
            --error: #EF4444; /* Red */
            --text-dark: #1F2937;
            --text-light: #6B7280;
            --bg-color: #F3F4F6;
            --card-bg: #FFFFFF;
            --radius: 16px;
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* App Container */
        .app-container {
            background: var(--card-bg);
            width: 100%;
            max-width: 600px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            min-height: 500px;
        }

        /* Header */
        header {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--primary-light);
            height: 6px;
            width: 100%;
        }

        .progress-bar {
            background: var(--primary);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
        }

        /* Main Content Area */
        main {
            padding: 30px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Screens */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Start Screen */
        .start-content {
            text-align: center;
        }

        .start-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* Quiz Layout */
        .question-category {
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.75rem;
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        /* Visual Area (for maps/diagrams) */
        .visual-area {
            background: var(--primary-light);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 120px;
            overflow: hidden;
        }
        
        .visual-area svg {
            max-width: 100%;
            height: auto;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .option-btn {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* State Styling for Options */
        .option-btn.correct {
            background-color: var(--success);
            border-color: var(--success);
            color: white;
        }

        .option-btn.wrong {
            background-color: var(--error);
            border-color: var(--error);
            color: white;
        }

        /* Feedback Section */
        .feedback-section {
            background: #F9FAFB;
            border-left: 4px solid var(--accent);
            padding: 15px;
            border-radius: 4px;
            margin-top: 10px;
            display: none; /* Hidden by default */
        }

        .feedback-title {
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-content {
            font-size: 0.95rem;
            line-height: 1.5;
            color: var(--text-dark);
        }
        
        .step-calc {
            font-family: 'Courier New', monospace;
            background: #eee;
            padding: 2px 5px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Next Button */
        .next-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            margin-top: 20px;
            display: none; /* Hidden until answer selected */
            transition: background 0.2s;
        }

        .next-btn:hover {
            background: #4338CA;
        }

        /* Results Screen */
        .result-score {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            margin: 10px 0;
        }

        .result-message {
            margin-bottom: 30px;
            color: var(--text-light);
        }

        .restart-btn {
            background: var(--text-dark);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.2s;
        }

        .restart-btn:hover {
            transform: scale(1.05);
        }

        /* Utility for specific visualization */
        .train-stop {
            fill: var(--primary);
        }
        .train-path {
            stroke: var(--text-light);
            stroke-width: 4;
            stroke-dasharray: 8 4;
        }
        .train-label {
            font-size: 12px;
            font-family: sans-serif;
            fill: var(--text-dark);
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div class="app-container">
        <header>
            <h1>Math Revision Quiz</h1>
            <p>Solve problems involving children, stickers, CDs, and routes.</p>
        </header>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <main>
            <!-- Start Screen -->
            <div id="start-screen" class="screen active start-content">
                <div class="start-icon">ðŸ“š</div>
                <h2>Ready to Revise?</h2>
                <p style="margin-top: 10px; color: var(--text-light);">
                    This quiz covers the topics from your exercise sheet. <br>
                    Read each question carefully and choose the best answer.
                </p>
                <button class="next-btn" style="display: block; margin: 30px auto 0;" onclick="startQuiz()">Start Quiz</button>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen" class="screen">
                <div class="question-category" id="q-category">Category</div>
                <div class="visual-area" id="q-visual">
                    <!-- Dynamic Content (SVG or Icons) goes here -->
                </div>
                <div class="question-text" id="q-text">Question goes here?</div>
                
                <div class="options-grid" id="options-container">
                    <!-- Buttons generated by JS -->
                </div>

                <div class="feedback-section" id="feedback-area">
                    <div class="feedback-title" id="feedback-title"></div>
                    <div class="feedback-content" id="feedback-text"></div>
                </div>

                <button class="next-btn" id="next-btn" onclick="nextQuestion()">Next Question</button>
            </div>

            <!-- Result Screen -->
            <div id="result-screen" class="screen" style="text-align: center;">
                <div class="start-icon">ðŸŽ‰</div>
                <h2>Quiz Complete!</h2>
                <div class="result-score" id="final-score">0/0</div>
                <p class="result-message" id="final-msg">Great job practicing!</p>
                <button class="restart-btn" onclick="restartQuiz()">Try Again</button>
            </div>
        </main>
    </div>

    <script>
        // --- Data: Questions based on the user's description ---
        const questions = [
            {
                id: 1,
                category: "Class Logic",
                text: "There are 42 children in the class. The teacher asks them to sit in rows of 6. How many rows of children will there be?",
                visualType: "icon", 
                visualContent: "ðŸ‘¦ðŸ‘§ðŸ§’ðŸ‘¦ðŸ‘§ðŸ§’", // Representative icons
                options: [5, 6, 7, 8],
                correctIndex: 2,
                explanation: "To find the number of rows, we divide the total number of children by the number of children in each row.<br><br><span class='step-calc'>42 Ã· 6 = 7</span><br><br>Therefore, there are <strong>7 rows</strong>."
            },
            {
                id: 2,
                category: "Stickers Problem",
                text: "Lin needs to solve this problem. She has 120 stickers. She gives 45 to Amy and buys 30 more. How many stickers does she have now?",
                visualType: "icon",
                visualContent: "ðŸŒŸ ðŸŒŸ ðŸŒŸ ðŸŒŸ ðŸŒŸ",
                options: [75, 105, 115, 165],
                correctIndex: 1,
                explanation: "This is a two-step problem.<br>1. First, subtract the stickers she gave away:<br><span class='step-calc'>120 - 45 = 75</span><br>2. Then, add the new stickers she bought:<br><span class='step-calc'>75 + 30 = 105</span><br><br>Lin has <strong>105 stickers</strong> left."
            },
            {
                id: 3,
                category: "CD Collection",
                text: "A shop has 200 CDs in stock. They sold 75 on Monday and 85 on Tuesday. How many CDs are left in the shop?",
                visualType: "icon",
                visualContent: "ðŸ’¿ ðŸ’¿ ðŸ’¿",
                options: [40, 50, 125, 360],
                correctIndex: 0,
                explanation: "First, calculate total sold:<br><span class='step-calc'>75 + 85 = 160</span> (sold).<br>Then, subtract from the total stock:<br><span class='step-calc'>200 - 160 = 40</span>.<br><br>There are <strong>40 CDs</strong> left."
            },
            {
                id: 4,
                category: "Train Route",
                text: "Look at the train map. The train travels from Station A to Station B (15 km), then Station B to Station C (20 km). What is the total distance traveled?",
                visualType: "svg-map",
                // SVG for the map
                visualContent: `
                    <svg width="300" height="100" viewBox="0 0 300 100">
                        <!-- Path -->
                        <line x1="40" y1="50" x2="260" y2="50" class="train-path" />
                        <!-- Station A -->
                        <circle cx="40" cy="50" r="8" fill="#EF4444" />
                        <text x="40" y="80" text-anchor="middle" class="train-label">A</text>
                        <text x="40" y="25" text-anchor="middle" class="train-label" fill="#666">15km</text>
                        
                        <!-- Station B -->
                        <circle cx="150" cy="50" r="6" fill="#10B981" />
                        <text x="150" y="80" text-anchor="middle" class="train-label">B</text>
                        <text x="150" y="25" text-anchor="middle" class="train-label" fill="#666">20km</text>

                        <!-- Station C -->
                        <circle cx="260" cy="50" r="8" fill="#EF4444" />
                        <text x="260" y="80" text-anchor="middle" class="train-label">C</text>
                        
                        <!-- Train Icon -->
                        <text x="80" y="55" font-size="24">ðŸš‚</text>
                    </svg>
                `,
                options: ["30 km", "35 km", "40 km", "45 km"],
                correctIndex: 1,
                explanation: "To find the total distance, add the two parts of the journey together.<br><br><span class='step-calc'>15 km + 20 km = 35 km</span><br><br>The total distance is <strong>35 km</strong>."
            }
        ];

        // --- State Management ---
        let currentQuestionIndex = 0;
        let score = 0;
        let hasAnswered = false;

        // --- DOM Elements ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const progressBar = document.getElementById('progressBar');
        const qCategory = document.getElementById('q-category');
        const qVisual = document.getElementById('q-visual');
        const qText = document.getElementById('q-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn');

        // --- Functions ---

        function startQuiz() {
            startScreen.classList.remove('active');
            quizScreen.classList.add('active');
            currentQuestionIndex = 0;
            score = 0;
            loadQuestion();
        }

        function loadQuestion() {
            hasAnswered = false;
            const q = questions[currentQuestionIndex];

            // Reset UI
            feedbackArea.style.display = 'none';
            nextBtn.style.display = 'none';
            optionsContainer.innerHTML = '';
            
            // Update Progress
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;

            // Populate Content
            qCategory.textContent = q.category;
            qText.textContent = q.text;
            
            // Handle Visuals (SVG or Icon)
            if (q.visualType === 'svg-map') {
                qVisual.innerHTML = q.visualContent;
                qVisual.style.padding = '10px';
            } else {
                qVisual.innerHTML = `<div style="font-size: 3rem; letter-spacing: 10px;">${q.visualContent}</div>`;
            }

            // Generate Options
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.onclick = () => handleAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function handleAnswer(selectedIndex, btnElement) {
            if (hasAnswered) return; // Prevent multiple clicks
            hasAnswered = true;

            const currentQ = questions[currentQuestionIndex];
            const isCorrect = selectedIndex === currentQ.correctIndex;
            const buttons = optionsContainer.querySelectorAll('.option-btn');

            // Visual Styling for Right/Wrong
            if (isCorrect) {
                btnElement.classList.add('correct');
                score++;
                feedbackTitle.innerHTML = `<span style="color:var(--success)">âœ“ Correct!</span> Great work.`;
            } else {
                btnElement.classList.add('wrong');
                // Highlight the correct one
                buttons[currentQ.correctIndex].classList.add('correct');
                feedbackTitle.innerHTML = `<span style="color:var(--error)">âœ• Incorrect.</span> Let's see how to solve it.`;
            }

            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);

            // Show Feedback
            feedbackText.innerHTML = currentQ.explanation;
            feedbackArea.style.display = 'block';
            
            // Show Next Button (change text if it's the last question)
            nextBtn.style.display = 'block';
            nextBtn.textContent = (currentQuestionIndex === questions.length - 1) ? 'See Results' : 'Next Question';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizScreen.classList.remove('active');
            resultScreen.classList.add('active');
            progressBar.style.width = '100%';

            const finalScoreEl = document.getElementById('final-score');
            const finalMsgEl = document.getElementById('final-msg');

            finalScoreEl.textContent = `${score} / ${questions.length}`;
            
            let message = "";
            const percentage = (score / questions.length) * 100;
            
            if (percentage === 100) {
                message = "Perfect! You're a math star! ðŸŒŸ";
            } else if (percentage >= 75) {
                message = "Excellent work! You understand these concepts well.";
            } else if (percentage >= 50) {
                message = "Good effort. Review the explanations below to improve.";
            } else {
                message = "Keep practicing. Read the feedback carefully and try again!";
            }
            
            finalMsgEl.textContent = message;
        }

        function restartQuiz() {
            resultScreen.classList.remove('active');
            startScreen.classList.add('active');
        }

    </script>
</body>
</html>