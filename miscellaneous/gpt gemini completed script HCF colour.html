<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>H.C.F. (GCD) Practice ‚Äî One Question at a Time</title>

<style>
    :root{
      /* Light & Colorful Palette */
      --bg-soft: #f1f5f9;      /* Light Gray Background */
      --bg-card: #ffffff;      /* Pure White Cards */
      --border: #cbd5e1;       /* Soft Gray Borders */
      
      /* Text Colors */
      --text-main: #1e293b;    /* Dark Slate (almost black) */
      --text-muted: #64748b;   /* Medium Gray */
      
      /* Bright Accents */
      --primary: #3b82f6;      /* Bright Blue */
      --accent: #8b5cf6;       /* Violet */
      --success: #10b981;      /* Green */
      --warn: #f59e0b;         /* Yellow/Orange */
      --danger: #ef4444;       /* Red */
      
      --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      --radius: 16px;
      
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, sans-serif;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    /* Main Body Background: Colorful Gradient (Blue -> Yellow -> Green hint) */
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text-main);
      /* A playful, light gradient background */
      background: linear-gradient(120deg, #dbeafe 0%, #fef9c3 50%, #dcfce7 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .app{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 1.25fr .9fr;
      gap:24px;
    }

    @media (max-width: 940px){
      .app{grid-template-columns: 1fr; }
    }

    /* Panels: White Cards with soft shadows */
    .panel, .side, .cardSmall, .feedback{
      background: var(--bg-card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      /* Remove old dark gradient */
      background-image: none !important;
      overflow: hidden;
    }

    /* Header */
    .header{
      padding:20px 24px;
      border-bottom:1px solid var(--border);
      background: #fff; /* Ensure solid white */
      background-image: none !important;
    }

    .title{
      display:flex; align-items:center; gap:12px;
      font-weight:800;
      letter-spacing:-0.5px;
      font-size:18px;
      margin:0 0 6px;
      color: var(--text-main);
    }
    
    /* The colorful icon badge */
    .badge{
      width:36px; height:36px; border-radius:10px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display:grid; place-items:center;
      color: white;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      flex:0 0 auto;
    }
    .subtitle{
      margin:0;
      color:var(--text-muted);
      line-height:1.4;
      font-size:14px;
    }

    .metaRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:16px;
      flex-wrap:wrap;
    }

    .chipRow{display:flex; gap:10px; flex-wrap:wrap;}
    .chip{
      padding:6px 12px;
      border-radius:99px;
      border:1px solid var(--border);
      background: #f8fafc;
      color: var(--text-muted);
      font-size:12px;
      font-weight:600;
    }
    .chip b{color: var(--text-main); font-weight:800}

    /* Progress Bar */
    .progressWrap{
      display:flex; align-items:center; gap:10px;
      min-width: 200px;
      flex:1;
      justify-content:flex-end;
    }
    .progress{
      width:min(300px, 100%);
      height:8px;
      border-radius:99px;
      background: #e2e8f0;
      overflow:hidden;
      border: none;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--primary), var(--success));
      border-radius:99px;
      transition: width .35s ease;
    }
    .progressText{
      font-size:12px;
      color:var(--text-muted);
      font-variant-numeric: tabular-nums;
      font-weight:600;
    }

    .body{
      padding:24px;
    }

    .qNum{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:13px;
      color: var(--text-muted);
      letter-spacing:.25px;
      margin-bottom:12px;
      font-weight:700;
      text-transform: uppercase;
    }
    .qNum .dot{
      width:8px;height:8px;border-radius:50%;
      background: var(--primary);
      box-shadow: none;
    }

    .question{
      font-size:24px;
      font-weight:800;
      margin:0 0 16px;
      line-height:1.2;
      color: var(--text-main);
    }
    .hint{
      margin:0 0 24px;
      color: var(--text-muted);
      font-size:15px;
      line-height:1.5;
    }

    .form{
      display:grid;
      gap:16px;
    }

    .field{
      display:grid;
      gap:6px;
    }
    label{
      font-size:13px;
      color: var(--text-muted);
      font-weight:600;
    }
    
    /* Input Styling */
    input{
      width:100%;
      padding:14px 16px;
      border-radius: 12px;
      border:2px solid var(--border);
      background: #f8fafc;
      color: var(--text-main);
      outline:none;
      font-size:18px;
      font-family: var(--sans);
      transition: all 0.2s ease;
    }
    input::placeholder{color: #94a3b8}
    input:focus{
      border-color: var(--primary);
      background: #fff;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    }

    .btnRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:8px;
    }
    button{
      appearance:none;
      border:none;
      border-radius: 12px;
      padding:12px 20px;
      font-weight:700;
      color: #fff;
      background: linear-gradient(135deg, var(--primary), #2563eb);
      cursor:pointer;
      box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
      transition: transform .1s ease, box-shadow .2s ease;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:14px;
    }
    button:hover{
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(37, 99, 235, 0.3);
    }
    button:active{transform: translateY(1px)}
    button.secondary{
      background: #fff;
      color: var(--text-main);
      border:2px solid var(--border);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    button.secondary:hover{
      border-color: var(--text-muted);
      background: #f8fafc;
    }
    button:disabled{
      opacity:.5;
      cursor:not-allowed;
      transform:none;
    }

    /* Feedback Box */
    .feedback{
      margin-top:20px;
      border-radius: var(--radius);
      background: #f0fdf4; /* Light Green background */
      border:1px solid #bbf7d0;
      color: #166534;
      display:none;
    }
    .feedback.show{display:block}
    .feedbackTop{
      padding:16px 16px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      border-bottom:1px solid rgba(0,0,0,0.05);
    }
    .status{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      color: #166534;
    }
    .pill{
      width:12px;height:12px;border-radius:50%;
      background: var(--success);
      margin-top:2px;
      flex:0 0 auto;
      box-shadow: none;
    }
    .statusText{
      line-height:1.4;
      font-size:15px;
    }
    .correctAnswer{
      font-family: var(--mono);
      font-size:13px;
      color: var(--text-muted);
      background: #fff;
      padding:6px 10px;
      border-radius: 8px;
      white-space:nowrap;
      height:fit-content;
      border:1px solid var(--border);
    }
    .feedbackBody{
      padding:16px 16px 18px;
      display:grid;
      gap:12px;
    }
    .sectionTitle{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:1px;
      color: var(--text-muted);
      margin:0;
      font-weight:800;
    }
    .explain, .pitfalls{
      margin:0;
      color: #334155;
      line-height:1.6;
      font-size:14px;
      white-space:pre-wrap;
    }
    .noteBox{
      border-left:4px solid var(--warn);
      background: #fffbeb;
      border-radius: 8px;
      padding:12px;
      border:1px solid #fcd34d;
    }

    /* Sidebar */
    .side{
      padding:20px;
      display:grid;
      gap:16px;
    }
    .smallTitle{
      margin:0 0 12px;
      font-weight:800;
      font-size:15px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      color: var(--text-main);
    }
    .smallTitle span{color: var(--text-muted); font-weight:600; font-size:13px}
    .list{
      margin:0;
      padding-left:16px;
      color: var(--text-muted);
      line-height:1.6;
      font-size:14px;
    }
    .kbd{
      font-family: var(--mono);
      font-size:11px;
      padding:2px 6px;
      border-radius: 6px;
      border:1px solid var(--border);
      background: #f1f5f9;
      color: var(--text-main);
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }

    .footer{
      padding:16px 20px;
      border-top:1px solid var(--border);
      background: #f8fafc;
      color: var(--text-muted);
      font-size:13px;
      line-height:1.5;
    }
    .footer b{color: var(--text-main)}
</style>
 </head>

<body>
  <div class="app">
    <!-- MAIN -->
    <section class="panel">
      <div class="header">
        <h1 class="title">
          <span class="badge">‚à¥</span>
          H.C.F. Practice (Highest Common Factor / GCD)
        </h1>
        <p class="subtitle">
          One question at a time, instant feedback, and a worked explanation + common pitfalls.
          Answers are checked numerically (you may type units, they‚Äôll be ignored).
        </p>

        <div class="metaRow">
          <div class="chipRow">
            <div class="chip">Question <b id="qIndex">1</b>/<b id="qTotal">40</b></div>
            <div class="chip">Score <b id="score">0</b></div>
            <div class="chip">Correct (first try) <b id="firstTry">0</b></div>
          </div>
          <div class="progressWrap">
            <div class="progress" aria-label="Progress">
              <div class="bar" id="bar"></div>
            </div>
            <div class="progressText" id="progressText">0%</div>
          </div>
        </div>
      </div>

      <div class="body">
        <div class="qNum"><span class="dot"></span><span id="qidText">#11</span></div>
        <h2 class="question" id="questionText">Loading‚Ä¶</h2>
        <p class="hint" id="questionHint"></p>

        <form class="form" id="form" autocomplete="off">
          <div id="fields"></div>

          <div class="btnRow">
            <button type="submit" id="submitBtn">Submit Answer ‚ü∂</button>
            <button type="button" class="secondary" id="skipBtn" title="Reveal answer and move on (no score)">
              Skip
            </button>
            <button type="button" class="secondary" id="restartBtn" title="Restart from question 1">
              Restart
            </button>
          </div>
        </form>

        <div class="feedback" id="feedback">
          <div class="feedbackTop">
            <div class="status" id="status">
              <span class="pill"></span>
              <div class="statusText" id="statusText">‚Ä¶</div>
            </div>
            <div class="correctAnswer" id="correctAnswer"></div>
          </div>
          <div class="feedbackBody">
            <div>
              <p class="sectionTitle">Explanation</p>
              <p class="explain" id="explain"></p>
            </div>
            <div class="noteBox">
              <p class="sectionTitle">Common pitfalls</p>
              <p class="pitfalls" id="pitfalls"></p>
            </div>
            <div class="btnRow">
              <button type="button" id="nextBtn" disabled>Next Question ‚ü∂</button>
              <button type="button" class="secondary" id="showWorkBtn">Show/Hide quick method</button>
            </div>
            <div id="quickMethod" style="display:none;">
              <p class="sectionTitle">Quick method (Euclid)</p>
              <p class="explain" id="euclid"></p>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <b>Tip:</b> For multi-part questions, fill every field. Units are optional (e.g., ‚Äú6 cm‚Äù is accepted as 6).
        Use <span class="kbd">Enter</span> to submit.
      </div>
    </section>

    <!-- SIDE -->
    <aside class="panel">
      <div class="side">
        <div class="cardSmall">
          <div class="smallTitle">What you‚Äôre practicing <span>H.C.F. / GCD</span></div>
          <ul class="list">
            <li><b>H.C.F.</b> (highest common factor) = largest integer dividing <b>all</b> given numbers exactly.</li>
            <li>For tiling/fencing ‚Äúlargest equal size‚Äù, the size is usually the <b>gcd</b> of the relevant lengths.</li>
            <li>For ‚Äúsame remainder r‚Äù, subtract r first: divisor must divide each <b>(number ‚àí r)</b>.</li>
          </ul>
        </div>

        <div class="cardSmall">
          <div class="smallTitle">Golden rule <span>Don‚Äôt mix up with L.C.M.</span></div>
          <ul class="list">
            <li><b>H.C.F.</b> divides all numbers.</li>
            <li><b>L.C.M.</b> is a multiple of all numbers.</li>
            <li>If your ‚Äúanswer‚Äù is larger than one of the numbers, it can‚Äôt be the H.C.F.</li>
          </ul>
        </div>

        <div class="cardSmall">
          <div class="smallTitle">Keyboard shortcuts <span>Speed</span></div>
          <ul class="list">
            <li><span class="kbd">Enter</span> submits.</li>
            <li>After feedback, <span class="kbd">Next</span> advances.</li>
            <li><span class="kbd">Skip</span> reveals and moves on (no score).</li>
          </ul>
        </div>
      </div>
    </aside>
  </div>

   <script>
    // ---------- Helpers ----------
    const gcd2 = (a, b) => {
      a = Math.abs(a); b = Math.abs(b);
      while (b !== 0) { const t = a % b; a = b; b = t; }
      return a;
    };
    const gcdList = (arr) => arr.reduce((g, x) => gcd2(g, x));

    // Extract first number from a string like "18", "18 cm", "¬£0.18", "18p"
    const firstNumber = (s) => {
      if (s == null) return null;
      const m = String(s).replace(/,/g, '').match(/-?\d+(\.\d+)?/);
      if (!m) return null;
      const n = Number(m[0]);
      return Number.isFinite(n) ? n : null;
    };

    const formatAnswer = (parts) => parts.map(p => `${p.label}: ${p.display}`).join("  |  ");

    const euclidTrace = (a, b) => {
      a = Math.abs(a); b = Math.abs(b);
      const lines = [];
      while (b !== 0) {
        const q = Math.floor(a / b);
        const r = a % b;
        lines.push(`${a} = ${b} √ó ${q} + ${r}`);
        a = b; b = r;
      }
      lines.push(`So gcd = ${a}.`);
      return lines.join("\n");
    };

    // ---------- Question bank ----------
    const Q = [
      { id: 11, prompt: "Find the H.C.F. of 9, 15 and 24.", inputs:[{label:"H.C.F.", ans:3, display:"3"}],
        explain: "Prime factors:\n9 = 3¬≤\n15 = 3 √ó 5\n24 = 2¬≥ √ó 3\nThe only factor common to all three is 3, so H.C.F. = 3.",
        pitfalls: "H.C.F. must divide every number. If it does not divide one of them exactly, it is wrong.\nDon‚Äôt confuse with L.C.M. (which is typically larger).",
        euclid: "Use Euclid on pairs: gcd(9,15)=3, then gcd(3,24)=3."
      },
      { id: 12, prompt: "Find the H.C.F. of 18, 24 and 32.", inputs:[{label:"H.C.F.", ans:2, display:"2"}],
        explain: "Prime factors:\n18 = 2 √ó 3¬≤\n24 = 2¬≥ √ó 3\n32 = 2‚Åµ\nOnly 2 is common to all three ‚Üí H.C.F. = 2.",
        pitfalls: "If any number is odd, 2 cannot be in the H.C.F. Here all are even, but higher powers of 2 fail because 18 has only one 2.",
        euclid: "gcd(18,24)=6, then gcd(6,32)=2."
      },
      { id: 13, prompt: "Find the H.C.F. of 12, 30 and 42.", inputs:[{label:"H.C.F.", ans:6, display:"6"}],
        explain: "Prime factors:\n12 = 2¬≤ √ó 3\n30 = 2 √ó 3 √ó 5\n42 = 2 √ó 3 √ó 7\nCommon part is 2 √ó 3 = 6 ‚Üí H.C.F. = 6.",
        pitfalls: "Don‚Äôt include factors that are not shared by all numbers (e.g., 5 or 7).",
        euclid: "gcd(12,30)=6, then gcd(6,42)=6."
      },
      { id: 14, prompt: "Find the H.C.F. of 24, 40 and 64.", inputs:[{label:"H.C.F.", ans:8, display:"8"}],
        explain: "Prime factors:\n24 = 2¬≥ √ó 3\n40 = 2¬≥ √ó 5\n64 = 2‚Å∂\nCommon is 2¬≥ = 8 ‚Üí H.C.F. = 8.",
        pitfalls: "The H.C.F. uses the smallest power of each prime common to all numbers (here power of 2 is min(3,3,6)=3).",
        euclid: "gcd(24,40)=8, then gcd(8,64)=8."
      },
      { id: 15, prompt: "Find the H.C.F. of 54 and 126.", inputs:[{label:"H.C.F.", ans:18, display:"18"}],
        explain: "Prime factors:\n54 = 2 √ó 3¬≥\n126 = 2 √ó 3¬≤ √ó 7\nCommon = 2 √ó 3¬≤ = 18 ‚Üí H.C.F. = 18.",
        pitfalls: "A common error is to take 3¬≥ from 54; but 126 only has 3¬≤ so you must take the smaller exponent.",
        euclid: `\n${euclidTrace(126,54)}`
      },
      { id: 16, prompt: "Find the H.C.F. of 84 and 140.", inputs:[{label:"H.C.F.", ans:28, display:"28"}],
        explain: "Prime factors:\n84 = 2¬≤ √ó 3 √ó 7\n140 = 2¬≤ √ó 5 √ó 7\nCommon = 2¬≤ √ó 7 = 28 ‚Üí H.C.F. = 28.",
        pitfalls: "Make sure the result divides both numbers: 84 √∑ 28 = 3, 140 √∑ 28 = 5.",
        euclid: `\n${euclidTrace(140,84)}`
      },
      { id: 17, prompt: "Find the H.C.F. of 30, 45 and 75.", inputs:[{label:"H.C.F.", ans:15, display:"15"}],
        explain: "Prime factors:\n30 = 2 √ó 3 √ó 5\n45 = 3¬≤ √ó 5\n75 = 3 √ó 5¬≤\nCommon = 3 √ó 5 = 15 ‚Üí H.C.F. = 15.",
        pitfalls: "Don‚Äôt include 2 (it‚Äôs not in 45 or 75). Don‚Äôt use 3¬≤ or 5¬≤ because not all have those powers.",
        euclid: "gcd(30,45)=15, then gcd(15,75)=15."
      },
      { id: 18, prompt: "Find the H.C.F. of 35, 50 and 65.", inputs:[{label:"H.C.F.", ans:5, display:"5"}],
        explain: "Prime factors:\n35 = 5 √ó 7\n50 = 2 √ó 5¬≤\n65 = 5 √ó 13\nOnly 5 is common ‚Üí H.C.F. = 5.",
        pitfalls: "Because 50 has 5¬≤, some mistakenly pick 25. But 35 and 65 are not divisible by 25.",
        euclid: "gcd(35,50)=5, then gcd(5,65)=5."
      },
      { id: 19, prompt: "Find the H.C.F. of 42, 70 and 56.", inputs:[{label:"H.C.F.", ans:14, display:"14"}],
        explain: "Prime factors:\n42 = 2 √ó 3 √ó 7\n70 = 2 √ó 5 √ó 7\n56 = 2¬≥ √ó 7\nCommon = 2 √ó 7 = 14 ‚Üí H.C.F. = 14.",
        pitfalls: "3 and 5 are not shared. Power of 2 is limited by 42 and 70 (only one 2 each).",
        euclid: "gcd(42,70)=14, then gcd(14,56)=14."
      },
      { id: 20, prompt: "Find the H.C.F. of 48, 120 and 72.", inputs:[{label:"H.C.F.", ans:24, display:"24"}],
        explain: "Prime factors:\n48 = 2‚Å¥ √ó 3\n120 = 2¬≥ √ó 3 √ó 5\n72 = 2¬≥ √ó 3¬≤\nCommon = 2¬≥ √ó 3 = 24 ‚Üí H.C.F. = 24.",
        pitfalls: "Don‚Äôt include 5 (only in 120). Don‚Äôt use 2‚Å¥ (120 has only 2¬≥).",
        euclid: "gcd(48,120)=24, then gcd(24,72)=24."
      },
      { id: 21, prompt: "Find the H.C.F. of 36, 72 and 63.", inputs:[{label:"H.C.F.", ans:9, display:"9"}],
        explain: "Prime factors:\n36 = 2¬≤ √ó 3¬≤\n72 = 2¬≥ √ó 3¬≤\n63 = 3¬≤ √ó 7\nCommon = 3¬≤ = 9 ‚Üí H.C.F. = 9.",
        pitfalls: "Because 36 and 72 are even, people sometimes keep a factor 2 ‚Äî but 63 is odd, so 2 cannot be common.",
        euclid: "gcd(36,72)=36, then gcd(36,63)=9."
      },
      { id: 22, prompt: "Find the H.C.F. of 63, 42, 105 and 21.", inputs:[{label:"H.C.F.", ans:21, display:"21"}],
        explain: "All numbers are divisible by 21:\n63 = 3√ó21, 42 = 2√ó21, 105 = 5√ó21, 21 = 1√ó21.\nNo number larger than 21 can divide 21 itself, so H.C.F. = 21.",
        pitfalls: "Always check the smallest number: the H.C.F. cannot exceed it.",
        euclid: "Pairwise: gcd(63,42)=21; gcd(21,105)=21; gcd(21,21)=21."
      },
      { id: 23, prompt: "Find the H.C.F. of 42, 66, 24 and 78.", inputs:[{label:"H.C.F.", ans:6, display:"6"}],
        explain: "Prime factors:\n42 = 2 √ó 3 √ó 7\n66 = 2 √ó 3 √ó 11\n24 = 2¬≥ √ó 3\n78 = 2 √ó 3 √ó 13\nCommon = 2 √ó 3 = 6 ‚Üí H.C.F. = 6.",
        pitfalls: "Don‚Äôt forget to include every number; adding one extra number can reduce the H.C.F. dramatically.",
        euclid: "gcd(42,66)=6; gcd(6,24)=6; gcd(6,78)=6."
      },
      { id: 24, prompt: "Find the H.C.F. of 45, 105 and 60.", inputs:[{label:"H.C.F.", ans:15, display:"15"}],
        explain: "Prime factors:\n45 = 3¬≤ √ó 5\n105 = 3 √ó 5 √ó 7\n60 = 2¬≤ √ó 3 √ó 5\nCommon = 3 √ó 5 = 15 ‚Üí H.C.F. = 15.",
        pitfalls: "If you include 3¬≤, 105 won‚Äôt be divisible by 9. If you include 2, 45 won‚Äôt be even.",
        euclid: "gcd(45,105)=15, then gcd(15,60)=15."
      },
      { id: 25, prompt: "Find the H.C.F. of 72, 108 and 54.", inputs:[{label:"H.C.F.", ans:18, display:"18"}],
        explain: "Prime factors:\n72 = 2¬≥ √ó 3¬≤\n108 = 2¬≤ √ó 3¬≥\n54 = 2 √ó 3¬≥\nCommon = 2¬π √ó 3¬≤ = 18 ‚Üí H.C.F. = 18.",
        pitfalls: "Use the smallest exponent of each prime across ALL numbers (2: min(3,2,1)=1; 3: min(2,3,3)=2).",
        euclid: "gcd(72,108)=36, then gcd(36,54)=18."
      },
      { id: 26, prompt: "Find the H.C.F. of 56, 84 and 105.", inputs:[{label:"H.C.F.", ans:7, display:"7"}],
        explain: "Prime factors:\n56 = 2¬≥ √ó 7\n84 = 2¬≤ √ó 3 √ó 7\n105 = 3 √ó 5 √ó 7\nOnly 7 is common ‚Üí H.C.F. = 7.",
        pitfalls: "Even though 56 and 84 share 28, 105 is not divisible by 28, so H.C.F. collapses to 7.",
        euclid: "gcd(56,84)=28, then gcd(28,105)=7."
      },
      { id: 27, prompt: "Find the H.C.F. of 84, 108 and 60.", inputs:[{label:"H.C.F.", ans:12, display:"12"}],
        explain: "Prime factors:\n84 = 2¬≤ √ó 3 √ó 7\n108 = 2¬≤ √ó 3¬≥\n60 = 2¬≤ √ó 3 √ó 5\nCommon = 2¬≤ √ó 3 = 12 ‚Üí H.C.F. = 12.",
        pitfalls: "Don‚Äôt include 7 or 5. Don‚Äôt use 3¬≥ because 84 and 60 have only one 3.",
        euclid: "gcd(84,108)=12, then gcd(12,60)=12."
      },
      { id: 28, prompt: "Find the H.C.F. of 112, 48 and 80.", inputs:[{label:"H.C.F.", ans:16, display:"16"}],
        explain: "Prime factors:\n112 = 2‚Å¥ √ó 7\n48 = 2‚Å¥ √ó 3\n80 = 2‚Å¥ √ó 5\nCommon = 2‚Å¥ = 16 ‚Üí H.C.F. = 16.",
        pitfalls: "Because all are multiples of 16, that‚Äôs a good candidate ‚Äî but always verify the next multiple (32) fails since 48 is not divisible by 32.",
        euclid: "gcd(112,48)=16, then gcd(16,80)=16."
      },
      { id: 29, prompt: "Find the H.C.F. of 144 and 198.", inputs:[{label:"H.C.F.", ans:18, display:"18"}],
        explain: "Prime factors:\n144 = 2‚Å¥ √ó 3¬≤\n198 = 2 √ó 3¬≤ √ó 11\nCommon = 2 √ó 3¬≤ = 18 ‚Üí H.C.F. = 18.",
        pitfalls: "If you take 2¬≤, 198 is not divisible by 4. Always limit by the smaller exponent.",
        euclid: `\n${euclidTrace(198,144)}`
      },
      { id: 30, prompt: "Find the H.C.F. of 216 and 168.", inputs:[{label:"H.C.F.", ans:24, display:"24"}],
        explain: "Prime factors:\n216 = 2¬≥ √ó 3¬≥\n168 = 2¬≥ √ó 3 √ó 7\nCommon = 2¬≥ √ó 3 = 24 ‚Üí H.C.F. = 24.",
        pitfalls: "Don‚Äôt include 3¬≥ because 168 has only one factor of 3.",
        euclid: `\n${euclidTrace(216,168)}`
      },
      { id: 31, prompt: "Find the H.C.F. of 112, 154 and 70.", inputs:[{label:"H.C.F.", ans:14, display:"14"}],
        explain: "Prime factors:\n112 = 2‚Å¥ √ó 7\n154 = 2 √ó 7 √ó 11\n70 = 2 √ó 5 √ó 7\nCommon = 2 √ó 7 = 14 ‚Üí H.C.F. = 14.",
        pitfalls: "A quick sanity check: 14 divides 112 (8), 154 (11), and 70 (5).",
        euclid: "gcd(112,154)=14, then gcd(14,70)=14."
      },
      { id: 32, prompt: "Find the H.C.F. of 108, 72, 180 and 288.", inputs:[{label:"H.C.F.", ans:36, display:"36"}],
        explain: "Prime factors:\n108 = 2¬≤ √ó 3¬≥\n72  = 2¬≥ √ó 3¬≤\n180 = 2¬≤ √ó 3¬≤ √ó 5\n288 = 2‚Åµ √ó 3¬≤\nCommon = 2¬≤ √ó 3¬≤ = 36 ‚Üí H.C.F. = 36.",
        pitfalls: "Including 5 would fail for 108/72/288. Also watch exponents: 3 is limited to power 2 because 72/180/288 only have 3¬≤.",
        euclid: "gcd(108,72)=36; gcd(36,180)=36; gcd(36,288)=36."
      },
      { id: 33, prompt: "Find the H.C.F. of 189, 81, 270 and 108.", inputs:[{label:"H.C.F.", ans:27, display:"27"}],
        explain: "Prime factors:\n189 = 3¬≥ √ó 7\n81  = 3‚Å¥\n270 = 2 √ó 3¬≥ √ó 5\n108 = 2¬≤ √ó 3¬≥\nCommon = 3¬≥ = 27 ‚Üí H.C.F. = 27.",
        pitfalls: "Because 81 is 3‚Å¥, people sometimes pick 81‚Äî but 189 is not divisible by 81. H.C.F. uses the smallest shared exponent.",
        euclid: "gcd(189,81)=27; gcd(27,270)=27; gcd(27,108)=27."
      },
      { id: 34, prompt: "Find the H.C.F. of 160, 96 and 224.", inputs:[{label:"H.C.F.", ans:32, display:"32"}],
        explain: "Prime factors:\n160 = 2‚Åµ √ó 5\n96  = 2‚Åµ √ó 3\n224 = 2‚Åµ √ó 7\nCommon = 2‚Åµ = 32 ‚Üí H.C.F. = 32.",
        pitfalls: "All three share 32, but 64 fails because 96 is not divisible by 64.",
        euclid: "gcd(160,96)=32, then gcd(32,224)=32."
      },
      { id: 35, prompt: "Find the H.C.F. of 144, 216 and 360.", inputs:[{label:"H.C.F.", ans:72, display:"72"}],
        explain: "Prime factors:\n144 = 2‚Å¥ √ó 3¬≤\n216 = 2¬≥ √ó 3¬≥\n360 = 2¬≥ √ó 3¬≤ √ó 5\nCommon = 2¬≥ √ó 3¬≤ = 72 ‚Üí H.C.F. = 72.",
        pitfalls: "Don‚Äôt include 5. Exponent of 2 is limited to 3 (because 216 and 360 have 2¬≥).",
        euclid: "gcd(144,216)=72, then gcd(72,360)=72."
      },
      { id: 36, prompt: "Find the H.C.F. of 280, 105 and 175.", inputs:[{label:"H.C.F.", ans:35, display:"35"}],
        explain: "Prime factors:\n280 = 2¬≥ √ó 5 √ó 7\n105 = 3 √ó 5 √ó 7\n175 = 5¬≤ √ó 7\nCommon = 5 √ó 7 = 35 ‚Üí H.C.F. = 35.",
        pitfalls: "It‚Äôs easy to lose the 7 if you only compare 280 and 175 first; make sure it divides 105 too.",
        euclid: "gcd(280,105)=35, then gcd(35,175)=35."
      },
      { id: 37, prompt: "Find the H.C.F. of 228, 156, 132 and 204.", inputs:[{label:"H.C.F.", ans:12, display:"12"}],
        explain: "Prime factors:\n228 = 2¬≤ √ó 3 √ó 19\n156 = 2¬≤ √ó 3 √ó 13\n132 = 2¬≤ √ó 3 √ó 11\n204 = 2¬≤ √ó 3 √ó 17\nCommon = 2¬≤ √ó 3 = 12 ‚Üí H.C.F. = 12.",
        pitfalls: "All numbers share 12 but not 24 (since 132 is not divisible by 24). Always test the next candidate multiple.",
        euclid: "gcd(228,156)=12; gcd(12,132)=12; gcd(12,204)=12."
      },
      { id: 38, prompt: "Find the H.C.F. of 126, 234, 198 and 90.", inputs:[{label:"H.C.F.", ans:18, display:"18"}],
        explain: "Prime factors:\n126 = 2 √ó 3¬≤ √ó 7\n234 = 2 √ó 3¬≤ √ó 13\n198 = 2 √ó 3¬≤ √ó 11\n90  = 2 √ó 3¬≤ √ó 5\nCommon = 2 √ó 3¬≤ = 18 ‚Üí H.C.F. = 18.",
        pitfalls: "Because 90 is smaller, it limits the H.C.F. (it only contains 3¬≤, not 3¬≥).",
        euclid: "gcd(126,234)=18; gcd(18,198)=18; gcd(18,90)=18."
      },
      { id: 39, prompt: "Find the H.C.F. of 252, 567 and 378.", inputs:[{label:"H.C.F.", ans:63, display:"63"}],
        explain: "Prime factors:\n252 = 2¬≤ √ó 3¬≤ √ó 7\n567 = 3‚Å¥ √ó 7\n378 = 2 √ó 3¬≥ √ó 7\nCommon = 3¬≤ √ó 7 = 63 ‚Üí H.C.F. = 63.",
        pitfalls: "Do not include a factor 2 because 567 is odd. For 3‚Äôs power, take the minimum (2) across the three.",
        euclid: "gcd(252,567)=63, then gcd(63,378)=63."
      },
      { id: 40, prompt: "Find the H.C.F. of 324, 432 and 540.", inputs:[{label:"H.C.F.", ans:108, display:"108"}],
        explain: "Prime factors:\n324 = 2¬≤ √ó 3‚Å¥\n432 = 2‚Å¥ √ó 3¬≥\n540 = 2¬≤ √ó 3¬≥ √ó 5\nCommon = 2¬≤ √ó 3¬≥ = 108 ‚Üí H.C.F. = 108.",
        pitfalls: "The factor 5 is not common. Exponent check matters: 3-power is limited to 3 because 432 and 540 have 3¬≥.",
        euclid: "gcd(324,432)=108, then gcd(108,540)=108."
      },
      { id: 41, prompt: "Equal squares, as large as possible, are ruled off on a rectangular board measuring 54 cm by 78 cm. Find the size of the squares. How many squares are there?",
        hint:"Largest square side = H.C.F. of the side lengths. Number of squares = (54/side) √ó (78/side).",
        inputs:[{label:"Side length of each square (cm)", ans:6, display:"6 cm"},{label:"Number of squares", ans:117, display:"117"}],
        explain: "To tile a 54 cm √ó 78 cm rectangle with equal squares, the square side must divide BOTH 54 and 78.\nSide = gcd(54,78) = 6 cm.\n\n54/6 = 9 along length, 78/6 = 13 along width. Total = 9 √ó 13 = 117.",
        pitfalls: "Using L.C.M. is the wrong direction. For the count, divide first, then multiply.",
        euclid: `\n${euclidTrace(78,54)}`
      },
      { id: 42, prompt: "Square tiles are used to cover a floor measuring 16 ft 6 in by 12 ft 9 in. If the tiles are all alike, and only whole ones are used, what is the greatest size they can be? How many tiles are there?",
        hint:"Convert to a single unit first (inches), take H.C.F., then compute the grid count.",
        inputs:[{label:"Tile side length (inches)", ans:9, display:"9 in"},{label:"Number of tiles", ans:374, display:"374"}],
        explain: "Convert to inches:\n16 ft 6 in = 198 in\n12 ft 9 in = 153 in\n\nLargest tile side = gcd(198,153) = 9 in.\n\n198/9 = 22 length, 153/9 = 17 width. Total = 22 √ó 17 = 374.",
        pitfalls: "Mixing feet and inches is the commonest error. Convert BOTH to inches first.",
        euclid: `\n${euclidTrace(198,153)}`
      },
      { id: 43, prompt: "Find the greatest mass that can be taken an exact number of times from 360 g, 504 g and 672 g.",
        inputs:[{label:"Greatest mass (g)", ans:24, display:"24 g"}],
        explain: "‚ÄúTaken an exact number of times‚Äù means the mass must divide each total exactly.\nCompute gcd(360,504,672) = 24 g.",
        pitfalls: "If you compute gcd of only two numbers and forget the third, the result will be wrong.",
        euclid: "gcd(360,504)=72; gcd(72,672)=24."
      },
      { id: 44, prompt: "A rectangular field measures 308 m by 228 m and needs fencing. If the posts are placed along its sides at equal distances apart, and the posts are as far apart as possible, what is the distance between them?",
        inputs:[{label:"Distance between posts (m)", ans:4, display:"4 m"}],
        explain: "Equal spacing means the spacing must divide both side lengths exactly.\nSpacing = gcd(308,228) = 4 m.",
        pitfalls: "The distance must fit both sides. If you only check one, corner alignment fails.",
        euclid: `\n${euclidTrace(308,228)}`
      },
      { id: 45, prompt: "Find the greatest number which when divided into 179 and 234 will leave a remainder of 3 in each case.",
        inputs:[{label:"Greatest divisor", ans:11, display:"11"}],
        explain: "Subtract remainders first:\n179 ‚àí 3 = 176\n234 ‚àí 3 = 231\n\ngcd(176,231) = 11.",
        pitfalls: "Do NOT take gcd(179,234). You must subtract the remainder first.",
        euclid: `\n${euclidTrace(231,176)}`
      },
      { id: 46, prompt: "Find the greatest sum of money that is exactly contained in ¬£1¬∑62, ¬£2¬∑52 and ¬£3¬∑42.",
        hint:"Convert to pence, take H.C.F.",
        inputs:[{label:"Greatest sum (p)", ans:18, display:"18 p"}],
        explain: "Work in pence: 162 p, 252 p, 342 p.\ngcd(162,252,342) = 18 p.",
        pitfalls: "Rounding decimals breaks exact divisibility. Use pence.",
        euclid: "gcd(162,252)=18; gcd(18,342)=18."
      },
      { id: 47, prompt: "A rectangular piece of ground measuring 486 m by 360 m is marked off exactly into equal square plots. Find the maximum area of a plot in square metres.",
        hint:"Largest square side = gcd(486,360). Area = side¬≤.",
        inputs:[{label:"Maximum area (m¬≤)", ans:324, display:"324 m¬≤"}],
        explain: "Side = gcd(486,360) = 18 m.\nArea = 18¬≤ = 324 m¬≤.",
        pitfalls: "Don't forget to square the side length! The question asks for AREA.",
        euclid: `\n${euclidTrace(486,360)}`
      },
      { id: 48, prompt: "Four wooden rods with lengths of 140 cm, 238 cm, 168 cm and 210 cm are cut up into pieces which are all of the same length. Find the greatest length possible for these pieces, if no wood is left over.",
        inputs:[{label:"Piece length (cm)", ans:14, display:"14 cm"}],
        explain: "No wood left over means the length divides every rod.\ngcd(140,238,168,210) = 14 cm.",
        pitfalls: "One single rod (like 238) can lower the GCD of all others.",
        euclid: "gcd(140,238)=14; gcd(14,168)=14; gcd(14,210)=14."
      },
      { id: 49, prompt: "Hurdles are used to fence in a rectangular piece of land measuring 393 m by 339 m. If the hurdles are all alike, and do not overlap, find their maximum length.",
        inputs:[{label:"Maximum hurdle length (m)", ans:3, display:"3 m"}],
        explain: "Length must divide both 393 and 339.\ngcd(393,339) = 3 m.",
        pitfalls: "Don't use perimeter; hurdle length must fit each side exactly.",
        euclid: `\n${euclidTrace(393,339)}`
      },
      { id: 50, prompt: "Find the greatest number which when divided into 1 250 and 1 000 leaves remainders of 26 and 28 respectively.",
        inputs:[{label:"Greatest divisor", ans:36, display:"36"}],
        explain: "Subtract remainders first:\n1250 ‚àí 26 = 1224\n1000 ‚àí 28 = 972\n\ngcd(1224,972) = 36.",
        pitfalls: "Always check that the remainder is smaller than the divisor.",
        euclid: `\n${euclidTrace(1224,972)}`
      }
    ];

    const total = Q.length;
    let idx = 0, score = 0, firstTryCorrect = 0, attemptsThisQ = 0, locked = false;

    const qIndexEl = document.getElementById("qIndex"), qTotalEl = document.getElementById("qTotal"), scoreEl = document.getElementById("score"), firstTryEl = document.getElementById("firstTry"), barEl = document.getElementById("bar"), progressTextEl = document.getElementById("progressText"), qidTextEl = document.getElementById("qidText"), questionTextEl = document.getElementById("questionText"), questionHintEl = document.getElementById("questionHint"), fieldsEl = document.getElementById("fields"), formEl = document.getElementById("form"), submitBtn = document.getElementById("submitBtn"), nextBtn = document.getElementById("nextBtn"), skipBtn = document.getElementById("skipBtn"), restartBtn = document.getElementById("restartBtn"), feedbackEl = document.getElementById("feedback"), statusEl = document.getElementById("status"), statusTextEl = document.getElementById("statusText"), correctAnswerEl = document.getElementById("correctAnswer"), explainEl = document.getElementById("explain"), pitfallsEl = document.getElementById("pitfalls"), euclidEl = document.getElementById("euclid"), showWorkBtn = document.getElementById("showWorkBtn"), quickMethodEl = document.getElementById("quickMethod");

    qTotalEl.textContent = total;

    function setProgress(){
      qIndexEl.textContent = (idx + 1);
      scoreEl.textContent = score;
      firstTryEl.textContent = firstTryCorrect;
      const pct = Math.round(((idx) / total) * 100);
      barEl.style.width = `${pct}%`;
      progressTextEl.textContent = `${pct}%`;
    }

    function renderQuestion(){
      const q = Q[idx];
      attemptsThisQ = 0; locked = false;
      qidTextEl.textContent = `#${q.id}`;
      questionTextEl.textContent = q.prompt;
      questionHintEl.textContent = q.hint || "Type a number. (Units are optional.)";
      fieldsEl.innerHTML = "";
      q.inputs.forEach((inp, i) => {
        const wrap = document.createElement("div"); wrap.className = "field";
        const lab = document.createElement("label"); lab.textContent = inp.label;
        const input = document.createElement("input"); input.type = "text"; input.inputMode = "numeric";
        input.placeholder = "e.g., " + inp.display; input.dataset.index = i;
        wrap.appendChild(lab); wrap.appendChild(input); fieldsEl.appendChild(wrap);
      });
      feedbackEl.classList.remove("show"); nextBtn.disabled = true;
      submitBtn.disabled = false; skipBtn.disabled = false;
      quickMethodEl.style.display = "none";
      setProgress();
      const first = fieldsEl.querySelector("input"); if (first) first.focus();
    }

    function evaluate(){
      const q = Q[idx];
      const inputs = Array.from(fieldsEl.querySelectorAll("input"));
      const results = inputs.map((el, i) => {
        const expected = q.inputs[i].ans;
        const got = firstNumber(el.value);
        return { ok: (got !== null && Number(got) === Number(expected)) };
      });
      return { allOk: results.every(r => r.ok) };
    }

    function showFeedback(isCorrect){
      const q = Q[idx];
      feedbackEl.classList.add("show");
      correctAnswerEl.textContent = formatAnswer(q.inputs);
      explainEl.textContent = q.explain;
      pitfallsEl.textContent = q.pitfalls;
      euclidEl.textContent = q.euclid || "Use Euclid‚Äôs algorithm pairwise.";
      if (isCorrect){
        statusEl.className = "status good"; statusTextEl.textContent = "Correct.";
      } else {
        statusEl.className = "status bad"; statusTextEl.textContent = "Incorrect.";
      }
      nextBtn.disabled = false;
    }

    formEl.addEventListener("submit", (e) => {
      e.preventDefault(); if (locked) return;
      attemptsThisQ++;
      const { allOk } = evaluate();
      showFeedback(allOk);
      if (allOk){
        if (attemptsThisQ === 1){ score++; firstTryCorrect++; }
        locked = true; submitBtn.disabled = true; skipBtn.disabled = true;
      }
    });

    nextBtn.addEventListener("click", () => {
      idx++;
      if (idx >= total){
        barEl.style.width = "100%"; progressTextEl.textContent = "100%";
        questionTextEl.textContent = "Finished üéâ";
        questionHintEl.textContent = `Final score: ${score}/${total}.`;
        fieldsEl.innerHTML = ""; feedbackEl.classList.remove("show");
        return;
      }
      renderQuestion();
    });

    skipBtn.addEventListener("click", () => {
      if (locked) return;
      showFeedback(false); locked = true;
      submitBtn.disabled = true; skipBtn.disabled = true;
    });

    restartBtn.addEventListener("click", () => {
      idx = 0; score = 0; firstTryCorrect = 0; renderQuestion();
    });

    showWorkBtn.addEventListener("click", () => {
      quickMethodEl.style.display = (quickMethodEl.style.display === "none") ? "block" : "none";
    });

    // Start the app
    renderQuestion();
  </script>
</body>
</html>